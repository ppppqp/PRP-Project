{"ast":null,"code":"var _jsxFileName = \"/Users/panqp/Documents/GitHub/PRP-Project/hw4/src/Dashboard.js\";\nimport React, { Component } from \"react\";\nimport data from \"./data\";\nimport { Layout } from \"antd\";\nimport { tsv, json } from \"d3\";\nimport View1 from \"./views/View1\";\nimport View2 from \"./views/View2\";\nimport View3 from \"./views/View3\";\nimport View4 from \"./views/View4\";\nimport View5 from \"./views/View5\";\nimport View6 from \"./views/View6\";\nimport { getHotel } from \"./data/hotel\";\nimport corona from \"./data/corona\";\nimport \"./dashboard.css\";\nimport countries from \"./data/countries-110m\";\nimport countryData from \"./data/countryData\";\nconst {\n  Sider,\n  Content,\n  Footer\n} = Layout;\nexport default class Dashboard extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSelectCountry = code => {\n      //this.setState({ selectedCountry: c });\n      console.log(code);\n      /*\n      const selectedCountry = countryData.filter(\n        (d) => d[\"Country Code\"] === code\n      );\n      \n      this.setState({ selectedCountry: selectedCountry[0] });\n      */\n\n      this.setState({\n        selectedCode: code\n      });\n    };\n\n    this.handleSelectX = attr => {\n      this.setState({\n        selectedAttr: attr\n      });\n    };\n\n    this.handleSelectY = attr => {\n      this.setState({\n        selectedYear: attr\n      });\n    };\n\n    this.changeSelectUser = value => {\n      this.setState({\n        selectedUser: value\n      });\n    };\n\n    this.changeGreaterThenAge = value => {\n      this.setState({\n        greaterThenAge: value\n      });\n    };\n\n    this.changeIncludedMon = value => {\n      this.setState({\n        includedMon: value\n      });\n    };\n\n    this.state = {\n      selectedUser: data[0],\n      greaterThenAge: 0,\n      includedGender: [\"Male\", \"Female\", \"Unknown\"],\n      hotel: getHotel(),\n      countryData: countryData,\n      selectedCountry: \"China\",\n      selectedCode: \"CHN\",\n      includedMon: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],\n      corona: corona,\n      countries: countries,\n      selectedAttr: \"GDP growth (annual %)\",\n      attrs: [\"GDP growth (annual %)\", \"GDP (current US$)\", \"Internet users (per 100 people)\", \"Rural population\", \"Population growth (annual %)\", \"GDP per capita growth (annual %)\", \"GDP per capita (current US$)\", \"Armed forces personnel (% of total labor force)\", \"Surface area (sq. km)\", \"Population density (people per sq. km of land area)\", \"Arable land (% of land area)\"],\n      selectedYear: \"2010 [YR2010]\",\n      years: [\"2010 [YR2010]\", \"2011 [YR2011]\", \"2012 [YR2012]\", \"2013 [YR2013]\", \"2014 [YR2014]\"],\n      countryName: []\n    };\n  }\n\n  getCountryname() {\n    var countryName = [];\n    Promise.all([tsv(\"https://unpkg.com/world-atlas@1.1.4/world/50m.tsv\"), json(\"https://unpkg.com/world-atlas@1.1.4/world/50m.json\")]).then(([tsvData, topoJSONdata]) => {\n      tsvData.forEach(d => {\n        countryName.push(d.name);\n      });\n    });\n    return countryName;\n  }\n\n  render() {\n    const {\n      selectedUser,\n      greaterThenAge,\n      includedGender,\n      includedMon,\n      hotel,\n      attrs,\n      selectedAttr,\n      selectedCountry,\n      selectedCode,\n      years,\n      selectedYear,\n      countryName\n    } = this.state;\n    const filteredData = data.filter(user => includedGender.indexOf(user.gender) !== -1).filter(user => user.age > greaterThenAge);\n    const filteredHotel = hotel.filter(h => includedMon.indexOf(h.month.toString()) !== -1);\n    const selectedAttrData = countryData.filter(d => d[\"Series Name\"] === selectedAttr);\n    console.log(selectedCode);\n    const singleCountryData = countryData.filter(d => d[\"Series Name\"] === selectedAttr && d[\"Country Code\"] === selectedCode);\n    let countryAttrDataList = [];\n    let countryFlag;\n    const temp = corona.filter(c => c.countryInfo.iso3 === selectedCode);\n    if (temp[0] != null) countryFlag = temp[0].countryInfo.flag;\n    const arr = [];\n    selectedAttrData.forEach(function (d) {\n      if (d[selectedYear] != NaN) arr.push(+d[selectedYear]);\n    });\n    const maxNum = Math.max(...arr);\n    console.log(arr);\n    /*\n    const maxNum = Math.max.apply(\n      Math,\n      array.map(function (o) {\n        return +o[selectedYear];\n      })\n    );\n      */\n    //d[selectedYear] > (maxNum / 100) * greaterThenAge\n\n    selectedAttrData.forEach(function (d) {\n      const temp = corona.filter(c => c.countryInfo.iso3 === d[\"Country Code\"]);\n\n      if (temp[0] != null) {\n        countryAttrDataList.push({\n          country: d[\"Country Name\"],\n          code: d[\"Country Code\"],\n          datum: d[selectedYear],\n          lat: temp[0].countryInfo.lat,\n          long: temp[0].countryInfo.long\n        });\n      }\n    });\n    console.log(countryAttrDataList);\n    let singleCountryArray = [{\n      year: 2010,\n      datum: singleCountryData[0][\"2010 [YR2010]\"]\n    }, {\n      year: 2011,\n      datum: singleCountryData[0][\"2011 [YR2011]\"]\n    }, {\n      year: 2012,\n      datum: singleCountryData[0][\"2012 [YR2012]\"]\n    }, {\n      year: 2013,\n      datum: singleCountryData[0][\"2013 [YR2013]\"]\n    }, {\n      year: 2014,\n      datum: singleCountryData[0][\"2014 [YR2014]\"]\n    }]; //console.log(singleCountryArray);\n    //const filteredHotel = [\"1\", \"2\"];\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Layout, {\n      style: {\n        height: 1200\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Sider, {\n      width: 300,\n      style: {\n        backgroundColor: \"#eee\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Content, {\n      style: {\n        height: 200\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(View1, {\n      selectedCountry: selectedCode,\n      selectedAttr: selectedAttr,\n      countryFlag: countryFlag,\n      value: singleCountryData[0] === null ? \"unknown\" : singleCountryData[0][selectedYear],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Content, {\n      style: {\n        height: 300\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Content, {\n      style: {\n        height: 400\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(View3, {\n      changeGreaterThenAge: this.changeGreaterThenAge,\n      changeIncludedMon: this.changeIncludedMon,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Layout, {\n      style: {\n        height: 1000\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Content, {\n      style: {\n        height: 300\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(View4, {\n      data: singleCountryArray,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Layout, {\n      style: {\n        height: 900\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(View5, {\n      data: countryAttrDataList,\n      attrs: attrs,\n      year: selectedYear,\n      onSelectCountry: this.handleSelectCountry,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Sider, {\n      width: 500,\n      style: {\n        backgroundColor: \"#eee\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(View6, {\n      data: countryData,\n      years: years,\n      attrs: attrs,\n      selectedAttr: selectedCode,\n      selectedYear: selectedYear,\n      onSelectX: this.handleSelectX,\n      onSelectY: this.handleSelectY,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 17\n      }\n    }))))), /*#__PURE__*/React.createElement(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Footer, {\n      style: {\n        height: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: -10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 13\n      }\n    }, \"Source Code\", \" \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://github.com/sdq/react-d3-dashboard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 15\n      }\n    }, \"https://github.com/sdq/react-d3-dashboard\"), \"; Author \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://sdq.ai\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 24\n      }\n    }, \"sdq\"), \";\"))));\n  }\n\n}","map":{"version":3,"sources":["/Users/panqp/Documents/GitHub/PRP-Project/hw4/src/Dashboard.js"],"names":["React","Component","data","Layout","tsv","json","View1","View2","View3","View4","View5","View6","getHotel","corona","countries","countryData","Sider","Content","Footer","Dashboard","constructor","props","handleSelectCountry","code","console","log","setState","selectedCode","handleSelectX","attr","selectedAttr","handleSelectY","selectedYear","changeSelectUser","value","selectedUser","changeGreaterThenAge","greaterThenAge","changeIncludedMon","includedMon","state","includedGender","hotel","selectedCountry","attrs","years","countryName","getCountryname","Promise","all","then","tsvData","topoJSONdata","forEach","d","push","name","render","filteredData","filter","user","indexOf","gender","age","filteredHotel","h","month","toString","selectedAttrData","singleCountryData","countryAttrDataList","countryFlag","temp","c","countryInfo","iso3","flag","arr","NaN","maxNum","Math","max","country","datum","lat","long","singleCountryArray","year","height","backgroundColor","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport data from \"./data\";\nimport { Layout } from \"antd\";\nimport { tsv, json } from \"d3\";\nimport View1 from \"./views/View1\";\nimport View2 from \"./views/View2\";\nimport View3 from \"./views/View3\";\nimport View4 from \"./views/View4\";\nimport View5 from \"./views/View5\";\nimport View6 from \"./views/View6\";\nimport { getHotel } from \"./data/hotel\";\nimport corona from \"./data/corona\";\nimport \"./dashboard.css\";\nimport countries from \"./data/countries-110m\";\nimport countryData from \"./data/countryData\";\n\nconst { Sider, Content, Footer } = Layout;\n\nexport default class Dashboard extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedUser: data[0],\n      greaterThenAge: 0,\n      includedGender: [\"Male\", \"Female\", \"Unknown\"],\n      hotel: getHotel(),\n      countryData: countryData,\n      selectedCountry: \"China\",\n      selectedCode: \"CHN\",\n      includedMon: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],\n      corona: corona,\n      countries: countries,\n      selectedAttr: \"GDP growth (annual %)\",\n      attrs: [\n        \"GDP growth (annual %)\",\n        \"GDP (current US$)\",\n        \"Internet users (per 100 people)\",\n        \"Rural population\",\n        \"Population growth (annual %)\",\n        \"GDP per capita growth (annual %)\",\n        \"GDP per capita (current US$)\",\n        \"Armed forces personnel (% of total labor force)\",\n        \"Surface area (sq. km)\",\n        \"Population density (people per sq. km of land area)\",\n        \"Arable land (% of land area)\",\n      ],\n      selectedYear: \"2010 [YR2010]\",\n      years: [\n        \"2010 [YR2010]\",\n        \"2011 [YR2011]\",\n        \"2012 [YR2012]\",\n        \"2013 [YR2013]\",\n        \"2014 [YR2014]\",\n      ],\n      countryName: [],\n    };\n  }\n  handleSelectCountry = (code) => {\n    //this.setState({ selectedCountry: c });\n    console.log(code);\n    /*\n    const selectedCountry = countryData.filter(\n      (d) => d[\"Country Code\"] === code\n    );\n    \n    this.setState({ selectedCountry: selectedCountry[0] });\n    */\n    this.setState({ selectedCode: code });\n  };\n  handleSelectX = (attr) => {\n    this.setState({ selectedAttr: attr });\n  };\n  handleSelectY = (attr) => {\n    this.setState({ selectedYear: attr });\n  };\n  changeSelectUser = (value) => {\n    this.setState({\n      selectedUser: value,\n    });\n  };\n\n  changeGreaterThenAge = (value) => {\n    this.setState({\n      greaterThenAge: value,\n    });\n  };\n\n  changeIncludedMon = (value) => {\n    this.setState({\n      includedMon: value,\n    });\n  };\n\n  getCountryname() {\n    var countryName = [];\n    Promise.all([\n      tsv(\"https://unpkg.com/world-atlas@1.1.4/world/50m.tsv\"),\n      json(\"https://unpkg.com/world-atlas@1.1.4/world/50m.json\"),\n    ]).then(([tsvData, topoJSONdata]) => {\n      tsvData.forEach((d) => {\n        countryName.push(d.name);\n      });\n    });\n    return countryName;\n  }\n  render() {\n    const {\n      selectedUser,\n      greaterThenAge,\n      includedGender,\n      includedMon,\n      hotel,\n      attrs,\n      selectedAttr,\n      selectedCountry,\n      selectedCode,\n      years,\n      selectedYear,\n      countryName,\n    } = this.state;\n    const filteredData = data\n      .filter((user) => includedGender.indexOf(user.gender) !== -1)\n      .filter((user) => user.age > greaterThenAge);\n    const filteredHotel = hotel.filter(\n      (h) => includedMon.indexOf(h.month.toString()) !== -1\n    );\n    const selectedAttrData = countryData.filter(\n      (d) => d[\"Series Name\"] === selectedAttr\n    );\n    console.log(selectedCode);\n    const singleCountryData = countryData.filter(\n      (d) =>\n        d[\"Series Name\"] === selectedAttr && d[\"Country Code\"] === selectedCode\n    );\n    let countryAttrDataList = [];\n    let countryFlag;\n    const temp = corona.filter((c) => c.countryInfo.iso3 === selectedCode);\n    if (temp[0] != null) countryFlag = temp[0].countryInfo.flag;\n\n    const arr = [];\n    selectedAttrData.forEach(function (d) {\n      if (d[selectedYear] != NaN) arr.push(+d[selectedYear]);\n    });\n    const maxNum = Math.max(...arr);\n    console.log(arr);\n    /*\n    const maxNum = Math.max.apply(\n      Math,\n      array.map(function (o) {\n        return +o[selectedYear];\n      })\n    );\n      */\n    //d[selectedYear] > (maxNum / 100) * greaterThenAge\n    selectedAttrData.forEach(function (d) {\n      const temp = corona.filter(\n        (c) => c.countryInfo.iso3 === d[\"Country Code\"]\n      );\n      if (temp[0] != null) {\n        countryAttrDataList.push({\n          country: d[\"Country Name\"],\n          code: d[\"Country Code\"],\n          datum: d[selectedYear],\n          lat: temp[0].countryInfo.lat,\n          long: temp[0].countryInfo.long,\n        });\n      }\n    });\n    console.log(countryAttrDataList);\n    let singleCountryArray = [\n      { year: 2010, datum: singleCountryData[0][\"2010 [YR2010]\"] },\n      { year: 2011, datum: singleCountryData[0][\"2011 [YR2011]\"] },\n      { year: 2012, datum: singleCountryData[0][\"2012 [YR2012]\"] },\n      { year: 2013, datum: singleCountryData[0][\"2013 [YR2013]\"] },\n      { year: 2014, datum: singleCountryData[0][\"2014 [YR2014]\"] },\n    ];\n    //console.log(singleCountryArray);\n    //const filteredHotel = [\"1\", \"2\"];\n    return (\n      <div>\n        <Layout style={{ height: 1200 }}>\n          <Sider width={300} style={{ backgroundColor: \"#eee\" }}>\n            <Content style={{ height: 200 }}>\n              <View1\n                selectedCountry={selectedCode}\n                selectedAttr={selectedAttr}\n                countryFlag={countryFlag}\n                value={\n                  singleCountryData[0] === null\n                    ? \"unknown\"\n                    : singleCountryData[0][selectedYear]\n                }\n              />\n            </Content>\n            <Content style={{ height: 300 }}></Content>\n            <Content style={{ height: 400 }}>\n              <View3\n                changeGreaterThenAge={this.changeGreaterThenAge}\n                changeIncludedMon={this.changeIncludedMon}\n              />\n            </Content>\n          </Sider>\n          <Layout style={{ height: 1000 }}>\n            <Content style={{ height: 300 }}>\n              <View4 data={singleCountryArray} />\n            </Content>\n            <Layout style={{ height: 900 }}>\n              <Content>\n                <View5\n                  data={countryAttrDataList}\n                  attrs={attrs}\n                  year={selectedYear}\n                  onSelectCountry={this.handleSelectCountry}\n                />\n              </Content>\n              <Sider width={500} style={{ backgroundColor: \"#eee\" }}>\n                <View6\n                  data={countryData}\n                  years={years}\n                  attrs={attrs}\n                  selectedAttr={selectedCode}\n                  selectedYear={selectedYear}\n                  onSelectX={this.handleSelectX}\n                  onSelectY={this.handleSelectY}\n                />\n              </Sider>\n            </Layout>\n          </Layout>\n        </Layout>\n        <Layout>\n          <Footer style={{ height: 20 }}>\n            <div style={{ marginTop: -10 }}>\n              Source Code{\" \"}\n              <a href=\"https://github.com/sdq/react-d3-dashboard\">\n                https://github.com/sdq/react-d3-dashboard\n              </a>\n              ; Author <a href=\"https://sdq.ai\">sdq</a>;\n            </div>\n          </Footer>\n        </Layout>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}